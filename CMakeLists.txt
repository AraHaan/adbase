
CMAKE_MINIMUM_REQUIRED(VERSION 2.6)
PROJECT(adbase)

SET (PROJECT_VERSION_MAJOR 1)
SET (PROJECT_VERSION_MINOR 1)
SET (PROJECT_VERSION_PATCH 6)

SET(CMAKE_MODULE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/CMakeModules)
SET(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} -std=c++11 -Wall -W -static-libstdc++ -m32")
SET(LINK_FLAGS "${LINK_FLAGS} -static-libstdc++ -m32")

#SUBDIRS(${PROJECT_SOURCE_DIR}/adbase)
IF (INSTALL_TEST)
SUBDIRS(${PROJECT_SOURCE_DIR}/adbase
	${PROJECT_SOURCE_DIR}/test
	${PROJECT_SOURCE_DIR}/seed
        ${PROJECT_SOURCE_DIR}/example)
ELSE(INSTALL_TEST)
SUBDIRS(${PROJECT_SOURCE_DIR}/adbase
	${PROJECT_SOURCE_DIR}/seed
        ${PROJECT_SOURCE_DIR}/example)
ENDIF(INSTALL_TEST)

IF (NOT DEFINED CMAKE_BINARY_DIR)
    SET(CMAKE_BINARY_DIR ${PROJECT_SOURCE_DIR}/_build)
ENDIF (NOT DEFINED CMAKE_BINARY_DIR)

if (NOT DEFINED CMAKE_INSTALL_PREFIX)
    set(CMAKE_INSTALL_PREFIX "/usr/local/")
endif (NOT DEFINED CMAKE_INSTALL_PREFIX)

ENABLE_TESTING()
ADD_TEST(TEST_ALL ${PROJECT_BINARY_DIR}/test/test_all)

INCLUDE (InstallRequiredSystemLibraries)
SET (CPACK_RESOURCE_FILE_LICENSE
      "${CMAKE_CURRENT_SOURCE_DIR}/LICENSE")
SET (CPACK_PACKAGE_VERSION_MAJOR "${PROJECT_VERSION_MAJOR}")
SET (CPACK_PACKAGE_VERSION_MINOR "${PROJECT_VERSION_MINOR}")
SET (CPACK_PACKAGE_VERSION_PATCH "${PROJECT_VERSION_PATCH}")
SET(CPACK_SOURCE_GENERATOR "TGZ;TBZ2;TZ")
INCLUDE (CPack)
